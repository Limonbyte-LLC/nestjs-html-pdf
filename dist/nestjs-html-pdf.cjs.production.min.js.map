{"version":3,"file":"nestjs-html-pdf.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["const puppeteer = require('puppeteer');\nconst hbs = require('handlebars')\nconst fs = require('fs-extra')\n\nexport const createPdf = async (filePath: string, options = {}, data = {}) => {\n  try {\n    const browser = await puppeteer.launch({ args: ['--no-sandbox'] });\n    const page = await browser.newPage();\n    \n    hbs.registerHelper(\"ifCond\", function (\n        v1: any, \n        operator: any, \n        v2: any, \n        options:any\n      ) {\n      switch (operator) {\n        case \"==\":\n          return v1 == v2 ? options.fn(data) : options.inverse(data);\n        case \"===\":\n          return v1 === v2 ? options.fn(data) : options.inverse(data);\n        case \"!=\":\n          return v1 != v2 ? options.fn(data) : options.inverse(data);\n        case \"!==\":\n          return v1 !== v2 ? options.fn(data) : options.inverse(data);\n        case \"<\":\n          return v1 < v2 ? options.fn(data) : options.inverse(data);\n        case \"<=\":\n          return v1 <= v2 ? options.fn(data) : options.inverse(data);\n        case \">\":\n          return v1 > v2 ? options.fn(data) : options.inverse(data);\n        case \">=\":\n          return v1 >= v2 ? options.fn(data) : options.inverse(data);\n        case \"&&\":\n          return v1 && v2 ? options.fn(data) : options.inverse(data);\n        case \"||\":\n          return v1 || v2 ? options.fn(data) : options.inverse(data);\n        default:\n          return options.inverse(options);\n      }\n    });\n\n    hbs.registerHelper({\n      eq: (v1: any, v2: any) => v1 === v2,\n      ne: (v1: any, v2: any) => v1 !== v2,\n      lt: (v1: number, v2: number) => v1 < v2,\n      gt: (v1: number, v2: number) => v1 > v2,\n      lte: (v1: number, v2: number) => v1 <= v2,\n      gte: (v1: number, v2: number) => v1 >= v2,\n      and() {\n          return Array.prototype.every.call(arguments, Boolean);\n      },\n      or() {\n          return Array.prototype.slice.call(arguments, 0, -1).some(Boolean);\n      }\n    });\n    \n    const html = await fs.readFile(filePath, 'utf8');\n    const content = hbs.compile(html)(data);\n    await page.setContent(content);\n\n    const buffer = await page.pdf({\n      // path: 'output-abc.pdf',\n      format: 'a4',\n      printBackground: true,\n      margin: {\n        left: '10mm',\n        top: '10mm',\n        right: '10mm',\n        bottom: '10mm',\n      },\n      ...options,\n    });\n    await browser.close();\n    // process.exit();\n    return buffer;\n    } catch (e) {\n    console.log(e);\n    }\n};\n"],"names":["puppeteer","require","hbs","fs","filePath","options","data","_context","launch","browser","newPage","page","registerHelper","v1","operator","v2","fn","inverse","eq","ne","lt","gt","lte","gte","and","Array","prototype","every","call","arguments","Boolean","or","slice","some","readFile","content","compile","setContent","pdf","format","printBackground","margin","left","top","right","bottom","buffer","close","console","log"],"mappings":"0iOAAA,IAAMA,EAAYC,QAAQ,aACpBC,EAAMD,QAAQ,cACdE,EAAKF,QAAQ,yCAEG,kBAAG,WAAOG,EAAkBC,EAAcC,GAAI,YAAA,6BAAA,OAAA,sBAAA,OAAK,gBAAvBD,IAAAA,EAAU,aAAIC,IAAAA,EAAO,IAAEC,SAAAA,SAE/CP,EAAUQ,SAAQ,OAA3B,OAAPC,SAAOF,SACME,EAAQC,UAAS,OA+CjC,OA/CGC,SAENT,EAAIU,eAAe,UAAU,SACzBC,EACAC,EACAC,EACAV,GAEF,OAAQS,GACN,IAAK,KACH,OAAOD,GAAME,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACvD,IAAK,MACH,OAAOO,IAAOE,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACxD,IAAK,KACH,OAAOO,GAAME,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACvD,IAAK,MACH,OAAOO,IAAOE,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACxD,IAAK,IACH,OAAOO,EAAKE,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACtD,IAAK,KACH,OAAOO,GAAME,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACvD,IAAK,IACH,OAAOO,EAAKE,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACtD,IAAK,KACH,OAAOO,GAAME,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACvD,IAAK,KACH,OAAOO,GAAME,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACvD,IAAK,KACH,OAAOO,GAAME,EAAKV,EAAQW,GAAGV,GAAQD,EAAQY,QAAQX,GACvD,QACE,OAAOD,EAAQY,QAAQZ,OAI7BH,EAAIU,eAAe,CACjBM,GAAI,SAACL,EAASE,GAAO,OAAKF,IAAOE,GACjCI,GAAI,SAACN,EAASE,GAAO,OAAKF,IAAOE,GACjCK,GAAI,SAACP,EAAYE,GAAU,OAAKF,EAAKE,GACrCM,GAAI,SAACR,EAAYE,GAAU,OAAKF,EAAKE,GACrCO,IAAK,SAACT,EAAYE,GAAU,OAAKF,GAAME,GACvCQ,IAAK,SAACV,EAAYE,GAAU,OAAKF,GAAME,GACvCS,eACI,OAAOC,MAAMC,UAAUC,MAAMC,KAAKC,UAAWC,UAEjDC,cACI,OAAON,MAAMC,UAAUM,MAAMJ,KAAKC,UAAW,GAAI,GAAGI,KAAKH,YAE5DvB,UAEgBJ,EAAG+B,SAAS9B,EAAU,QAAO,QACT,OAAjC+B,EAAUjC,EAAIkC,eAAJlC,CAAkBI,GAAKC,UACjCI,EAAK0B,WAAWF,GAAQ,QAAA,OAAA5B,UAETI,EAAK2B,OAExBC,OAAQ,KACRC,iBAAiB,EACjBC,OAAQ,CACNC,KAAM,OACNC,IAAK,OACLC,MAAO,OACPC,OAAQ,SAEPxC,IACH,QAXU,OAANyC,SAAMvC,UAYNE,EAAQsC,QAAO,QAAA,yBAEdD,GAAM,QAAAvC,UAAAA,gBAEbyC,QAAQC,UAAO,QAAA,UAAA,wCAElB,uBA1EqB"}